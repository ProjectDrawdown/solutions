{% extends "default/module.html.jinja2" %}

{#
    Do not print decorators
#}
{% macro decorators(doc) %}
{% endmacro %}

{#
    Do not print inherited members
#}
{% macro inherited(cls) %}
{% endmacro %}


{#
    Our variation on nav_members
#}
{% macro index_entry(m) %}
    <li>
        {% if m.type == "class" %}
            <a class="class" href="#{{ m.qualname }}">{{ m.name }}</a>
        {% elif m.type == "module" %}
            <a class="module" href="#{{ m.name }}">{{ m.fullname }}</a>
        {% elif m.name == "__init__" %}
            {# Skip #}
        {% else %}
            <a class="{{ m.type }}" href="#{{ m.qualname }}">{{ m.name }}</a>
        {% endif %}
        {% if m.type is in(["class", "module"]) %}
            <ul>
            {% for x in m.own_members if is_public(x) | trim %}
                {{ index_entry(x) | indent(12) }}
            {% endfor %}
            </ul>
        {% endif %}
    </li>
{% endmacro %}

{# 
    Do our own nav, re-arranging the way pdoc does it.
#}
{% block nav %}
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button">{% include 'navtoggle.svg' %}</label>
        <input id="togglestate" type="checkbox">
        <div>
            {# Omit module-list link: we do module list inline below #}
            {% block nav_title %}
                {% if logo %}
                    {% if logo_link %}<a href="{{ logo_link }}">{% endif %}
                    <img src="{{ logo }}" class="logo" alt="project logo"/>
                    {% if logo_link %}</a>{% endif %}
                {% endif %}
            {% endblock %}

            {% block search_box %}
                {% if search and all_modules|length > 1 %}
                    {# we set a pattern here so that we can use the :valid CSS selector #}
                    <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                            pattern=".+" required>
                {% endif %}
            {% endblock %}

            <h2> API Documentation </h2>
            <ul class="memberlist">
            {% for mod in pmodules %}
                {{ index_entry(mod) }}
            </ul>
            {% else %}
            <h2>Nothing Here!  Nada!</h2>
            {% endfor %}

            {% block nav_footer %}
                {% if footer_text %}
                <footer>{{ footer_text }}</footer>
                {% endif %}
            {% endblock %}

            {% block attribution %}
                <div class="attribution">
                    built with <a href="https://pdoc.dev">pdoc</a>
                </div>
            {% endblock %}
        </div>
    </nav>
{% endblock nav %}
